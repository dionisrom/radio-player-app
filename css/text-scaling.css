/* Text Scaling
 * This file enhances text readability across different screen sizes
 * Preventing overflow and ensuring optimal reading experience on mobile devices
 * Uses flexible text sizing, line height adjustments, and overflow prevention
 */

/* Base Text Scaling Variables */
:root {
  /* Viewport-based dynamic text scaling */
  --text-scale-ratio: 1;
  --text-min-font-size: 0.75rem;
  --text-max-font-size: 1.25rem;
  
  /* Line height adjustment */
  --base-line-height: 1.5;
  --heading-line-height: 1.2;
  
  /* Text container breathing room */
  --text-container-padding: 1rem;
  --text-container-padding-sm: 0.75rem;
  --text-container-padding-xs: 0.5rem;
  
  /* Fluid typography variables */
  --fluid-typography-min: 320;  /* smallest viewport in px */
  --fluid-typography-max: 1440; /* largest viewport in px */
  
  /* Prevent text from becoming too small on very small screens */
  --minimum-readable-font-size: 12px;
}

/* Responsive text scaling at different viewport sizes */
@media (max-width: 480px) {
  :root {
    --text-scale-ratio: 0.85; /* 15% reduction for extra small screens */
    --text-container-padding: var(--text-container-padding-xs);
  }
  
  /* Ensure minimum font size for very small screens */
  html {
    font-size: max(var(--minimum-readable-font-size), 14px);
  }
  
  /* Prevent headings from becoming too large */
  h1, .text-4xl, .text-5xl {
    font-size: min(2rem, calc(1.5rem + 2vw)) !important;
    line-height: 1.2 !important;
  }
  
  h2, .text-3xl {
    font-size: min(1.5rem, calc(1.25rem + 1vw)) !important;
    line-height: 1.25 !important;
  }
}

@media (min-width: 481px) and (max-width: 639px) {
  :root {
    --text-scale-ratio: 0.9; /* 10% reduction for small screens */
    --text-container-padding: var(--text-container-padding-sm);
  }
  
  /* Prevent headings from becoming too large */
  h1, .text-4xl, .text-5xl {
    font-size: min(2.25rem, calc(1.75rem + 2vw)) !important;
    line-height: 1.2 !important;
  }
}

/* Fluid Text Scaling System - scales text between viewport sizes */
.fluid-text-xs {
  font-size: clamp(calc(var(--text-min-font-size) * var(--text-scale-ratio)), 
                  calc(0.75rem + 0.5vw), 
                  var(--font-size-xs));
}

.fluid-text-sm {
  font-size: clamp(calc(var(--text-min-font-size) * var(--text-scale-ratio)), 
                  calc(0.875rem + 0.5vw), 
                  var(--font-size-sm));
}

.fluid-text-md {
  font-size: clamp(calc(var(--text-min-font-size) * 1.15 * var(--text-scale-ratio)), 
                  calc(1rem + 0.5vw), 
                  var(--font-size-md));
}

.fluid-text-lg {
  font-size: clamp(calc(var(--text-min-font-size) * 1.25 * var(--text-scale-ratio)), 
                  calc(1.125rem + 0.5vw), 
                  var(--font-size-lg));
}

.fluid-text-xl {
  font-size: clamp(calc(var(--text-min-font-size) * 1.5 * var(--text-scale-ratio)), 
                  calc(1.25rem + 0.75vw), 
                  var(--font-size-xl));
}

.fluid-text-2xl {
  font-size: clamp(calc(var(--text-min-font-size) * 1.75 * var(--text-scale-ratio)), 
                  calc(1.5rem + 1vw), 
                  var(--font-size-2xl));
}

.fluid-text-3xl {
  font-size: clamp(calc(var(--text-min-font-size) * 2 * var(--text-scale-ratio)), 
                  calc(1.875rem + 1.25vw), 
                  var(--font-size-3xl));
}

/* Line height adjustments for better readability on small screens */
@media (max-width: 639px) {
  p, li, .body-text {
    line-height: 1.6 !important; /* Increased line height for better readability */
  }
  
  h1, h2, h3, h4, .heading {
    line-height: 1.3 !important; /* Adjusted line height for headings */
  }
}

/* Text overflow prevention - apply to containers where overflow is likely */
.prevent-text-overflow {
  overflow-wrap: break-word;
  word-wrap: break-word;
  -webkit-hyphens: auto;
  -ms-hyphens: auto;
  hyphens: auto;
  max-width: 100%;
}

/* Text containers with adaptive padding based on screen size */
.text-container {
  padding: var(--text-container-padding);
  max-width: 100%;
  overflow-wrap: break-word;
}

/* Ensure all text elements are responsive */
h1, h2, h3, h4, h5, h6, p, span, div, li, a, button, input, textarea, label {
  max-width: 100%;
  overflow-wrap: break-word;
}

/* Truncation with ellipsis for single line text that might overflow */
.text-truncate-line {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

/* Multi-line truncation with ellipsis (2 lines by default) */
.text-truncate-multi {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  max-width: 100%;
}

/* Control the number of lines before truncation */
.text-truncate-1 { -webkit-line-clamp: 1; line-clamp: 1; }
.text-truncate-2 { -webkit-line-clamp: 2; line-clamp: 2; }
.text-truncate-3 { -webkit-line-clamp: 3; line-clamp: 3; }
.text-truncate-4 { -webkit-line-clamp: 4; line-clamp: 4; }

/* Responsive text alignment */
@media (max-width: 639px) {
  .sm-text-center { text-align: center !important; }
  .sm-text-left { text-align: left !important; }
  .sm-text-right { text-align: right !important; }
}

/* Enhanced text spacing for small screens */
@media (max-width: 639px) {
  .text-spacing-enhanced {
    letter-spacing: 0.01em;
    word-spacing: 0.05em;
  }
  
  /* Add more spacing between paragraphs */
  p + p {
    margin-top: 1.25em;
  }
}

/* Responsive station information - specific to radio player app */
@media (max-width: 639px) {
  #info-name {
    font-size: clamp(1rem, calc(0.9rem + 1.5vw), 1.25rem) !important;
    line-height: 1.3 !important;
    margin: 0.5rem 0 !important;
  }
  
  #info-genre {
    font-size: clamp(0.75rem, calc(0.7rem + 0.5vw), 0.875rem) !important;
    padding: 0.5rem 0.75rem !important;
  }
  
  #now-playing-title {
    font-size: clamp(0.875rem, calc(0.8rem + 0.8vw), 1.1rem) !important;
    padding: 1rem !important;
    min-height: 2.5rem !important;
    line-height: 1.4 !important;
  }
}

/* Adjustments for station items on small screens */
@media (max-width: 639px) {
  .station-item {
    padding: 0.875rem 1rem !important;
  }
  
  .station-item .text-lg {
    font-size: clamp(0.9375rem, calc(0.875rem + 0.5vw), 1.125rem) !important;
  }
  
  .station-item .text-sm {
    font-size: clamp(0.75rem, calc(0.7rem + 0.3vw), 0.875rem) !important;
  }
}

/* Fixes for specific elements that might cause overflow */
#keyboard-help {
  font-size: clamp(0.65rem, calc(0.6rem + 0.3vw), 0.75rem) !important;
  max-width: 100%;
  overflow-wrap: break-word;
}

/* Ensure equalizer labels don't overflow */
.eq-label {
  font-size: clamp(0.65rem, calc(0.6rem + 0.25vw), 0.75rem) !important;
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Apply optimal readable line length for text content */
.readable-line-length {
  max-width: 70ch;
  margin-left: auto;
  margin-right: auto;
}

/* Additional helper for mobile - Ensures text in any element won't overflow */
@media (max-width: 639px) {
  * {
    overflow-wrap: break-word;
    word-wrap: break-word;
  }
}
