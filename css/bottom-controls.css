/**
 * Bottom Controls for Mobile UI
 * Provides mobile-friendly controls at the bottom of the screen for thumb access
 */

/* Mobile Bottom Controls Container */
.bottom-controls {
    display: none; /* Hide by default, show only on mobile */
}

/* Variables for bottom control sizing */
:root {
    --bottom-controls-height: 60px;
    --bottom-controls-padding: 8px;
    --bottom-controls-border-radius: 16px 16px 0 0;
    --bottom-button-size: 44px;
    --bottom-controls-z-index: 40;
}

/* Media query for mobile devices */
@media (max-width: 768px) {
    /* Show the bottom controls on mobile */
    .bottom-controls {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 8px;
        align-items: center;
        justify-items: center;
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: var(--bottom-controls-height);
        padding: var(--bottom-controls-padding);
        background: var(--bottom-controls-bg, rgba(255, 255, 255, 0.8));
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        z-index: var(--bottom-controls-z-index);
        transition: transform 0.3s ease-in-out;
        border-radius: var(--bottom-controls-border-radius);
    }

    /* Dark mode for bottom controls */
    .dark .bottom-controls {
        --bottom-controls-bg: rgba(15, 23, 42, 0.8);
        border-top-color: rgba(255, 255, 255, 0.05);
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
    }

    /* Bottom control buttons */
    .bottom-controls button {
        width: var(--bottom-button-size);
        height: var(--bottom-button-size);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        color: var(--button-text-color, #6366f1);
        background: var(--button-bg, rgba(255, 255, 255, 0.4));
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
    }
    
    .dark .bottom-controls button {
        --button-bg: rgba(51, 65, 85, 0.4);
        --button-text-color: #a5b4fc;
        border-color: rgba(255, 255, 255, 0.1);
    }
    
    /* Button hover/active states */
    .bottom-controls button:hover {
        background: var(--button-hover-bg, rgba(255, 255, 255, 0.6));
    }
    
    .dark .bottom-controls button:hover {
        --button-hover-bg: rgba(51, 65, 85, 0.6);
    }
    
    .bottom-controls button:active {
        transform: scale(0.95);
    }

    /* Primary action button (larger size) */
    .bottom-controls .primary-action {
        width: calc(var(--bottom-button-size) * 1.2);
        height: calc(var(--bottom-button-size) * 1.2);
        font-size: 1.5rem;
        background: var(--primary-button-bg, #6366f1);
        color: white;
        box-shadow: 0 2px 10px rgba(99, 102, 241, 0.4);
        border-color: rgba(99, 102, 241, 0.5);
    }
    
    .dark .bottom-controls .primary-action {
        --primary-button-bg: #4f46e5;
        box-shadow: 0 2px 10px rgba(79, 70, 229, 0.4);
        border-color: rgba(79, 70, 229, 0.5);
    }
    
    .bottom-controls .primary-action:hover {
        background: var(--primary-button-hover-bg, #4f46e5);
    }
    
    .dark .bottom-controls .primary-action:hover {
        --primary-button-hover-bg: #4338ca;
    }

    /* Different colors for different actions */
    .bottom-controls .favorite-action {
        color: var(--favorite-color, #eab308);
    }
    
    .bottom-controls .eq-action {
        color: var(--eq-color, #10b981);
    }
    
    .bottom-controls .timer-action {
        color: var(--timer-color, #0ea5e9);
    }
    
    .bottom-controls .share-action {
        color: var(--share-color, #8b5cf6);
    }
    
    .dark .bottom-controls .favorite-action {
        --favorite-color: #fbbf24;
    }
    
    .dark .bottom-controls .eq-action {
        --eq-color: #34d399;
    }
    
    .dark .bottom-controls .timer-action {
        --eq-color: #38bdf8;
    }
    
    .dark .bottom-controls .share-action {
        --share-color: #a78bfa;
    }

    /* Active states for toggleable buttons */
    .bottom-controls button.active {
        background: var(--active-bg, rgba(99, 102, 241, 0.2));
    }
    
    .dark .bottom-controls button.active {
        --active-bg: rgba(79, 70, 229, 0.3);
    }
    
    .bottom-controls .favorite-action.active {
        background: var(--favorite-active-bg, rgba(234, 179, 8, 0.2));
        color: var(--favorite-active-color, #eab308);
    }
    
    .dark .bottom-controls .favorite-action.active {
        --favorite-active-bg: rgba(251, 191, 36, 0.3);
        --favorite-active-color: #fcd34d;
    }
    
    /* Badge for notification or status */
    .bottom-controls .badge {
        position: absolute;
        top: -5px;
        right: -5px;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: var(--badge-bg, #ef4444);
        color: white;
        font-size: 0.7rem;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    /* Add padding to the body to prevent content from being hidden behind the bottom controls */
    body.has-bottom-controls {
        padding-bottom: calc(var(--bottom-controls-height) + var(--bottom-controls-padding) * 2);
    }

    /* Hide desktop player elements on mobile when using bottom controls */
    .use-bottom-controls .desktop-only-controls {
        display: none;
    }

    /* Adjust the main container when bottom controls are active */
    .use-bottom-controls #custom-audio-player {
        padding-bottom: 0;
        margin-bottom: 0;
    }
    
    /* Show/hide buttons based on player state */
    .is-playing .play-btn {
        display: none;
    }
    
    .is-paused .pause-btn {
        display: none;
    }
    
    .is-muted .unmute-btn {
        display: none;
    }
    
    .is-unmuted .mute-btn {
        display: none;
    }
}

/* Specific animation for the primary button when playing */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.is-playing .primary-action {
    animation: pulse 2s infinite ease-in-out;
}
